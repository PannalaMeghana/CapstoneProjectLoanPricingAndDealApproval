<div class="dashboard">
  <nav class="navbar">
    <div class="container">
      <div class="navbar-brand">
        <h2>Admin Portal</h2>
      </div>
      <div class="navbar-menu">
        <a routerLink="/admin/dashboard" routerLinkActive="active">Dashboard</a>
        <a routerLink="/admin/loans" routerLinkActive="active">All Loans</a>
        <a routerLink="/admin/users" routerLinkActive="active">Users</a>
        <span class="user-info">{{ currentUser?.username }} (Admin)</span>
        <button class="btn btn-secondary" (click)="logout()">Logout</button>
      </div>
    </div>
  </nav>

  <div class="container">
    <div class="page-header">
      <h1>User Management</h1>
    </div>

    <div class="card">
      <div class="table-container" *ngIf="users.length > 0; else noUsers">
        <table class="table">
          <thead>
            <tr>
              <th>Username</th>
              <th>Email</th>
              <th>Name</th>
              <th>Designation</th>
              <th>Department</th>
              <th>Roles</th>
              <th>Status</th>
              <th>Created</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let user of users">
              <td><strong>{{ user.username }}</strong></td>
              <td>{{ user.email }}</td>
              <td>{{ user.firstName }} {{ user.lastName }}</td>
              <td>{{ user.designation }}</td>
              <td>{{ user.department }}</td>
              <td>
                <span class="badge badge-submitted" *ngFor="let role of user.roles">{{ role }}</span>
              </td>
              <td>
                <span class="badge" [class.badge-approved]="user.active" [class.badge-rejected]="!user.active">
                  {{ user.active ? 'Active' : 'Inactive' }}
                </span>
              </td>
              <td>{{ user.createdAt | date: 'short' }}</td>
              <td>
                <button class="btn-icon danger" (click)="deleteUser(user.id)" title="Delete">ğŸ—‘ï¸</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <ng-template #noUsers>
        <p class="no-data">No users found</p>
      </ng-template>
    </div>
  </div>
</div>
